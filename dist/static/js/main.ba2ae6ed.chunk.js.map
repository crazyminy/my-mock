{"version":3,"sources":["pages/login.jsx","api/ajax.js","api/index.js","util/eventBus.js","components/left.jsx","components/right.jsx","pages/home.jsx","router/index.js","index.js"],"names":["center_flex","height","display","justifyContent","alignItems","Login","props","state","clickStartHandler","bind","this","history","push","style","onClick","type","fontSize","Component","ajax","url","data","Promise","resolve","reject","promise","dataStr","Object","keys","forEach","key","substring","lastIndexOf","axios","get","QS","stringify","post","headers","then","response","catch","error","console","log","BASE_URL","requestDetail","requestSet","value","eventBus","transMessage","require","Left","wholeList","filterList","showList","curPage","getAllKeys","showRight","filterChange","on","newState","setState","emit","e","str","target","trim","reg","RegExp","ele","test","padding","shape","icon","marginRight","marginTop","marginBottom","onChange","overflowY","itemLayout","dataSource","renderItem","item","index","Item","removeListener","Right","jsonKey","jsonValue","jsonObject","undefined","keyChangeHandler","valueChangeHandler","submitSet","handleNewShow","getKey","res","JSON","parse","aString","message","warning","success","placeholder","TextArea","rows","maxHeight","src","textAlign","Header","Footer","Content","routes","path","component","className","marginLeft","color","background","span","ReactDOM","render","map","route","exact","document","getElementById"],"mappings":"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","file":"static/js/main.ba2ae6ed.chunk.js","sourcesContent":["import React, {Component} from 'react';\nimport {Button} from \"antd\";\n\nlet center_flex={\n    height:'100%',\n    display:'flex',\n    justifyContent:'center',\n    alignItems:'center'\n}\n\nclass Login extends Component {\n\n    constructor(props){\n        super(props);\n        this.state = {};\n        this.clickStartHandler = this.clickStartHandler.bind(this);\n    }\n\n    clickStartHandler(){\n        //alert(23333);\n        //console.log(this.props);\n        this.props.history.push('/home');\n    }\n\n    render() {\n        return (\n            <div style={center_flex}>\n                <Button onClick={this.clickStartHandler} type=\"primary\" style={{fontSize:'50px',height:'90px'}}>开始使用</Button>\n            </div>\n        );\n    }\n\n}\n\nexport default Login;\n","import axios from \"axios\";\nimport QS from 'querystring'\nexport  function ajax(url, data={ },type='POST') {\n\n    return new Promise(function (resolve, reject) {\n        // 执行异步ajax请求\n        let promise\n        if (type === 'GET') {\n            // 准备url query参数数据\n            let dataStr = '' //数据拼接字符串\n            Object.keys(data).forEach(key => {\n                dataStr += key + '=' + data[key] + '&'\n            })\n            if (dataStr !== '') {\n                dataStr = dataStr.substring(0, dataStr.lastIndexOf('&'))\n                url = url + '?' + dataStr\n            }\n            // 发送get请求\n            promise = axios.get(url)\n        } else {\n            // 发送post请求\n            data = QS.stringify(data)\n            //console.log(\"ajaxurl:::::::\")\n            //console.log(url)\n            promise = axios.post(url, data,{headers:{'Content-Type':'application/x-www-form-urlencoded'}})\n        }\n        promise.then(function (response) {\n            // 成功了调用resolve()\n            //console.log(response.data);\n            resolve(response.data) //返回 response的data\n        }).catch(function (error) {\n            //失败了调用reject()\n            //Toast(\"网络连接错误\");\n            console.log(error);\n            reject(error)\n        })\n\n    })\n}\n","import {ajax} from \"./ajax\";\n\nconst BASE_URL = 'http://47.100.224.40:3000';\n\nexport const requestAllKeys = ()=>ajax(BASE_URL+'/getSet',{});\n\nexport const requestDetail = (key)=>ajax(BASE_URL+`/api/${key}`,{})\n\nexport const requestSet = (key,value)=>ajax(BASE_URL+'/set',{key,value})\n","const EventEmitter = require('events');\n\nclass EventBus extends EventEmitter{\n    transMessage = {}\n}\n\nconst eventBus = new EventBus();\n\nexport default eventBus;\n","import React, {Component} from 'react';\nimport {Button, Input, List} from \"antd\";\nimport {requestAllKeys} from \"../api\";\nimport eventBus from \"../util/eventBus\";\n\nclass Left extends Component {\n\n    constructor(props){\n        super(props);\n        this.state = {\n            wholeList:[],\n            filterList:[],\n            showList:[],\n            curPage:1\n        };\n        this.getAllKeys = this.getAllKeys.bind(this);\n        this.showRight = this.showRight.bind(this);\n        this.filterChange = this.filterChange.bind(this);\n\n        eventBus.on(\"refresh\",this.getAllKeys);\n    }\n\n    componentDidMount() {\n        this.getAllKeys();\n    }\n\n    async getAllKeys(){\n        let newState = {...this.state};\n        newState.wholeList = await requestAllKeys();\n        newState.filterList = newState.wholeList;\n        this.setState(newState);\n    }\n\n    showRight(key){\n        eventBus.transMessage = {key:key};\n        eventBus.emit('showNew');\n    }\n\n    filterChange(e){\n        let str = e.target.value.trim();\n        console.log(121212122);\n        if(str===\"\"){\n            let newState = {...this.state};\n            newState.filterList = newState.wholeList;\n            this.setState(newState);\n            return 0;\n        }\n        let reg = new RegExp(`^.*${str}.*$`);\n        let wholeList = this.state.wholeList;\n        let filterList = [];\n        wholeList.forEach(ele=>{\n            if (reg.test(ele)){\n                filterList.push(ele);\n            }\n        })\n        let newState = {...this.state};\n        newState.filterList = filterList;\n        this.setState(newState);\n    }\n\n    render() {\n        return (\n            <div style={{padding:'15px',height:'100%'}}>\n                <Button type=\"primary\" shape=\"circle\" icon=\"reload\" onClick={this.getAllKeys} style={{marginRight:'10px'}}/>\n                <Button type=\"primary\" shape=\"circle\" icon=\"file-add\" onClick={()=>this.showRight(\"__empty__\")}/>\n                <div style={{marginTop:'10px',marginBottom:'10px'}}>\n                    过滤<Input onChange={this.filterChange}/>\n                </div>\n                <List\n                    style={{height:'100%',overflowY:'auto'}}\n                    itemLayout={\"horizontal\"}\n                    dataSource={this.state.filterList}\n                    renderItem={(item,index) =>  (<List.Item key={index} onClick={()=>this.showRight(item)}>{item}</List.Item>)}>\n                </List>\n            </div>\n        );\n    }\n\n    componentWillUnmount() {\n        eventBus.removeListener(\"toRefresh\",this.getAllKeys)\n    }\n}\n\nexport default Left;\n","import React, {Component} from 'react';\nimport {Input} from \"antd\";\nimport ReactJson from \"react-json-view\";\nimport TextArea from \"antd/es/input/TextArea\";\nimport {Button} from 'antd'\nimport {message} from \"antd\";\nimport {requestDetail, requestSet} from \"../api\";\nimport eventBus from \"../util/eventBus\";\n\nclass Right extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            jsonKey:'',\n            jsonValue:'',\n            jsonObject:undefined\n        }\n        this.keyChangeHandler = this.keyChangeHandler.bind(this);\n        this.valueChangeHandler = this.valueChangeHandler.bind(this);\n        this.submitSet = this.submitSet.bind(this);\n        this.handleNewShow = this.handleNewShow.bind(this);\n        this.getKey = this.getKey.bind(this);\n\n        eventBus.on('showNew',this.handleNewShow)\n    }\n\n    handleNewShow(){\n        console.log(eventBus)\n        if(eventBus.transMessage.key===\"__empty__\"){\n            this.setState({\n                jsonKey:'',\n                jsonValue:'',\n                jsonObject:undefined\n            })\n        }else{\n            let key = eventBus.transMessage.key;\n            this.getKey(key)\n        }\n    }\n\n    async getKey(key){\n        let res = await requestDetail(key);\n        let value = JSON.stringify(res);\n        let newState = {...this.state};\n        newState.jsonKey = key;\n        newState.jsonValue = value;\n        try{newState.jsonObject = JSON.parse(value)}catch (e) {\n            newState.jsonObject = {aString:value};\n        }\n        this.setState(newState);\n    }\n\n    keyChangeHandler(e){\n        let key = e.target.value.trim();\n        let newState = {...this.state};\n        newState.jsonKey = key;\n        this.setState(newState);\n    }\n    valueChangeHandler(e){\n        let value = e.target.value;\n        let newState = {...this.state};\n        newState.jsonValue = value;\n\n        try{newState.jsonObject = JSON.parse(value)}catch (e) {\n            console.log(1111111)\n            newState.jsonObject = {aString:value};\n        }\n        this.setState(newState);\n    }\n    async submitSet(){\n        let key = this.state.jsonKey;\n        if(!/^[a-zA-Z_]+[a-zA-Z\\d_]*$/.test(key)){\n            message.warning('输入的键不符合命名规范');\n            return 0;\n        }\n        let value = this.state.jsonValue;\n        let res = await requestSet(key,value);\n        if(res==='OK'){\n            eventBus.emit(\"toRefresh\");\n            message.success('成功！')\n        }\n    }\n    render() {\n        return (\n            <div style={{height:'100%',overflowY:\"auto\"}}>\n                <Input placeholder=\"Key\" onChange={this.keyChangeHandler} value={this.state.jsonKey}></Input>\n                <TextArea rows={5} placeholder=\"Value\" onChange={this.valueChangeHandler} value={this.state.jsonValue}/>\n                <ReactJson style={{maxHeight:'500px',overflowY:\"auto\"}} src={this.state.jsonObject}/>\n                <div style={{marginTop:'10px',textAlign:'center'}}>\n                    <Button onClick={this.submitSet} type={\"primary\"}>提交/更新</Button>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Right;\n","import React, {Component} from 'react';\nimport {Col, Layout, Row} from \"antd\";\nimport Left from \"../components/left\";\nimport Right from \"../components/right\";\nconst { Header, Footer,  Content } = Layout;\n\n\n\n\nclass Home extends Component {\n    render() {\n        return (\n            <div style={{height:\"100%\"}}>\n\n                <Layout style={{height:'100%'}}>\n                    <Header className={\"dark-primary-color\"} >\n                  <span style={{fontSize:'30px',marginLeft:'10px',color:'#fff'}}>\n                      My Mock\n                  </span>\n                        <span style={{fontSize:'15px',color:'#fff',marginLeft:'10px'}}>version 1.0</span>\n                    </Header>\n                    <Content className={\"default-primary-color\"} style={{ padding: '20px',height:'100%'}}>\n\n                        {/*<div style={{ padding: 24, background: '#fff', height:'100%' }}>\n\n                        </div>*/}\n                        <Row style={{padding: 24, background: '#fff', height:'100%'}}>\n                            <Col span={12} style={{height:'80%'}}>\n                                <Left></Left>\n                            </Col>\n                            <Col span={12}>\n                                <Right></Right>\n                            </Col>\n                        </Row>\n                    </Content>\n                    <Footer className={\"dark-primary-color\"} style={{ textAlign: 'center' }}>My Mock ©2019 Created by crazyminy</Footer>\n                </Layout>\n            </div>\n        );\n    }\n}\n\nexport default Home;\n","import Login from \"../pages/login\";\nimport Home from \"../pages/home\";\n\nconst routes = [\n    {\n        path:'/',\n        component:Login\n    },\n    {\n        path:'/home',\n        component: Home\n    }\n];\n\nexport default routes;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {HashRouter,Switch,Route} from \"react-router-dom\";\nimport routes from \"./router\";\n\n//ReactDOM.render(<App />, document.getElementById('root'));\nReactDOM.render((\n    <HashRouter>\n        <Switch>\n            {routes.map(function (route,index) {\n                return <Route exact path={route.path} key={index} component={route.component}></Route>\n            })}\n        </Switch>\n    </HashRouter>\n),document.getElementById(\"root\"));\n\n\n"],"sourceRoot":""}